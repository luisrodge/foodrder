<div class="row">
  <div class="col-md-12 text-center">
    <h1><%= @restaurant.name %></h1>
  </div>
</div>
<hr>

<div class="row">
  <div class="col-md-6">
    <h1 class="remove-margin text-sb">Menus (<%= @menus.count %>)</h1>
  </div>
  <div class="col-md-6 text-right">
    <%= link_to "New Menu", new_admin_restaurant_menu_path(@restaurant), class: "btn btn-primary btn-lg" %>
    <%= link_to "New Special", new_admin_restaurant_special_path(@restaurant), class: "btn btn-default btn-lg" %>
    <%= link_to "Add Drinks", new_admin_restaurant_drink_path(@restaurant), class: "btn btn-default btn-lg" %>
  </div>
</div>

<hr>
<%= link_to "View Specials (#{@restaurant.specials.count})", admin_restaurant_specials_path(@restaurant), class: "btn btn-info btn-lg" %>

<br><br><br><br>

<div class="row grid">
  <!-- add sizing element for columnWidth -->
  <div class="grid-sizer col-md-4"></div>
  <% @menus.each do |menu| %>
      <div class="grid-item col-md-4 col-sm-12 col-xs-12 col-sb">
        <div class="grid-item-content col-box col-box-db">
          <div class="row">
            <div class="col-md-6">
              <h3 class="remove-margin"><span class="text-bb"><%= menu.name %></span></h3><br>
            </div>
            <div class="col-md-6 text-right">
              <%= link_to "Edit Menu", "#", class: "btn btn-default btn-sm" %>
              <%= link_to "Add New Food", new_admin_menu_food_path(menu), class: "btn btn-primary btn-sm" %>
            </div>
          </div>
          <% if menu.tags.any? %>
              <hr>
              <div class="row">
                <div class="col-md-12">
                  Tags: <%= menu.tag_names %>
                </div>
              </div>
          <% end %>

          <hr>
          <br>
          <% menu.foods.each do |food| %>
              <div class="food-wrapper">
                <div class="row">
                  <div class="col-md-4 col-sm-4 col-xs-4">
                    <div class="image-medium-wrapper">
                      <%= image_tag(food.primary_image_url(:medium), class: "img-responsive") %>
                    </div>
                  </div>
                  <div class="col-md-5 col-sm-4 col-xs-4">
                    <h4><%= food.name %></h4>
                    <% unless food.price.nil? %>
                        <h4 class="text-price"><%= price_format(food.price) %></h4>
                    <% end %>
                  </div>
                  <div class="col-md-3 col-sm-4 col-xs-4 text-right">
                    <%= link_to "Edit Food", edit_admin_restaurant_path(food.restaurant), class: "btn btn-default btn-sm" %>
                  </div>
                </div>
                <% if food.variants.any? %>
                    <br>
                    <h4 class="remove-margin text-strong"><span class="text-bb">Variations</span></h4>
                    <br><br>
                    <% food.variants.each do |variant| %>
                        <div class="row">
                          <div class="col-md-4">
                            <div class="col-box col-box-bg">
                              <h4 class="remove-margin text-sb"><%= variant.name %></h4>
                              <h4 class="text-price remove-margin"><%= price_format(variant.price) %></h4>
                            </div>
                          </div>
                        </div>
                    <% end %>
                <% end %>
              </div>
          <% end %>
        </div>
      </div>
  <% end %>
</div>

<br>
<hr>
<h2>Drinks (<%= @restaurant.drinks.count %>)</h2>
<hr>
<br>
<div class="row grid">
  <div class="grid-sizer col-md-4"></div>
  <% @restaurant.drinks.order("created_at DESC").each do |drink| %>
      <div class="grid-item col-md-4 col-sb">
        <div class="grid-item-content col-box col-box-db">
          <div class="row">
            <div class="col-md-8">
              <h3 class="text-strong"><span class="text-bb"><%= drink.name %></span></h3><br>
            </div>
            <div class="col-md-4">
              <%= image_tag(drink.primary_image_url(:medium), class: "img-responsive") %>
            </div>
          </div>
          <% unless drink.variants.any? %>
              <h4 class="text-price">Default Price: <%= price_format(drink.default_price) %></h4>
          <% end %>
          <% if drink.variants.any? %>
              <h3>Variants</h3>
              <div class="row">
                <div class="col-md-12">
                  <% drink.variants.each do |variant| %>
                      <hr>
                      <h4>Name: <%= variant.name %></h4>
                      <h4 class="text-price"><%= price_format(variant.price) %></h4>
                  <% end %>
                </div>
              </div>
          <% end %>
        </div>
      </div>
  <% end %>
</div>

<script type="text/javascript" charset="utf-8">
    $('.grid').isotope({
        itemSelector: '.grid-item', // use a separate class for itemSelector, other than .col-
        percentPosition: true,
        masonry: {
            columnWidth: '.grid-sizer'
        }
    });
</script>